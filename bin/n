#!/bin/bash

# time the command ourselves
let start_time=`date +%s`
$@
rval=$?
let end_time=`date +%s`
let duration=`expr $end_time - $start_time`

# emit a notification if the command took longer than 2 seconds
if [ $duration -ge 2 ] ; then
    if hash terminal-notifier 2>/dev/null; then
        terminal-notifier -title "$@" -message "Return code: $rval"
    elif hash say 2>/dev/null; then
        say $@ returned $?
    else
        # as a last resort, try to make a beep noise
        echo 
    fi
fi

exit $rval
